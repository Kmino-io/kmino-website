---
import { getCollection } from "astro:content";
import BlogLayout from "../layouts/BlogLayout.astro";
import { Icon } from "astro-icon/components";
import BlogBanner from "~/components/BlogBanner.astro";

const allPosts = await getCollection("blog");

const allPostsData = allPosts.map((post) => post.data);
---

<BlogLayout>
  <BlogBanner posts={allPostsData} />

  <div
    class="container my-[60px] flex max-w-[1240px] flex-col items-center justify-between gap-6 lg:my-[100px] lg:flex-row"
  >
    <h2
      class="font-alt max-w-[500px] text-[22px] lg:text-[32px] xl:max-w-[733px]"
    >
      Keep up with the latest trends, insights, and strategies for digital
      products.
    </h2>

    <form method="GET" action="/blog" class="relative flex-1">
      <span class="hidden">Search input</span>
      <input
        type="text"
        name="search"
        placeholder="Search for your interests"
        class="font-alt w-full rounded-full border-[1.5px] border-black/30 bg-black/5 px-6 py-3 text-sm outline-black hover:border-black/50"
      />

      <Icon
        name="ri:search-2-line"
        size="18"
        class="absolute top-1/2 right-6 -translate-y-1/2"
      />
    </form>
  </div>

  <div class="container max-w-[1240px]">
    <ul class="list-inside list-disc">
      {
        allPosts.map((post) => {
          return (
            <li class="mb-4">
              <a href={`/blog/${post.id}`} class="text-primary underline">
                {post.data.title}
              </a>
            </li>
          );
        })
      }
    </ul>
  </div>
</BlogLayout>
